(this["webpackJsonpvideo-call"]=this["webpackJsonpvideo-call"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(2),i=n.n(c),r=(n(9),n(3)),l={video:!0,audio:!0},s=null,u=function(){var e=Object(o.useRef)(),t=Object(o.useRef)(),n=Object(o.useState)(1),c=Object(r.a)(n,2),i=(c[0],c[1],function(){var e=window.location.search;if(e){var t=(e=e.split("&"))[0].slice(e[0].indexOf("=")+1,e[0].length),n=e[1].slice(e[1].indexOf("=")+1,e[1].length);s=new WebSocket("ws://video-socket-be.herokuapp.com/?mid=".concat(t,"&user=").concat(n))}});return Object(o.useEffect)((function(){window.WebSocket=window.WebSocket||window.MozWebSocket,navigator.mediaDevices.getUserMedia(l).then((function(n){i(),e.current.srcObject=n,s&&(s.onmessage=function(e){t.current.src=e.data},s.onclose=function(e){console.log("CLosing connection --\x3e ".concat(e))},s.onopen=function(t){var n=setInterval((function(){if(s&&1===s.readyState){var t=document.createElement("canvas");t.height=e.current.videoHeight,t.width=e.current.videoWidth,t.getContext("2d").drawImage(e.current,0,0);var o=t.toDataURL("image/jpeg",.7);s.send(o)}else clearInterval(n),i()}),100)})}))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("video",{ref:e,autoPlay:!0}),a.a.createElement("img",{ref:t}))};n(10);var d=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(u,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1"}),a.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.254e8153.chunk.js.map